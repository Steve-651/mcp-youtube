# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a TypeScript MCP (Model Context Protocol) server designed to download YouTube videos and provide utilities for AI understanding of content, including metadata and transcriptions.

The server uses the official @modelcontextprotocol/sdk with a simple, direct approach - no custom abstractions or complex registration systems.

## Development Commands

- `npm run build` - Compile TypeScript to JavaScript in dist/ directory  
- `npm start` - Run the compiled server from dist/index.js
- `npm run debug` - Start server with Node.js inspector for debugging
- `npm run cleanup` - Kill Node processes specific to this project (via cleanup.ps1)

## Architecture

### File Structure

- `src/index.ts` - Main MCP server entry point using McpServer from SDK
- `src/types/index.ts` - Available for custom types (MCP SDK handles protocol types)
- `dist/` - Compiled JavaScript output (generated by build)
- `cleanup.ps1` - PowerShell script to kill project-specific Node processes

### Key Architecture Notes

- Uses McpServer directly from @modelcontextprotocol/sdk
- Tools registered with simple `mcpServer.registerTool()` calls
- Zod schemas for input validation and self-documenting parameters
- StdioServerTransport for MCP communication
- TypeScript compilation target: ES6, CommonJS modules

### Adding New Tools

Add tools directly in `src/index.ts` using this pattern:

```typescript
mcpServer.registerTool("toolName", {
  description: "What the tool does",
  inputSchema: {
    param1: z.string().describe("Parameter description"),
    param2: z.number().optional().describe("Optional parameter"),
  },
}, async ({ param1, param2 }) => {
  // Tool implementation
  return {
    content: [
      {
        type: "text", 
        text: "Result text",
      },
    ],
  };
});
```

### Development Workflow

1. Add tools directly to `src/index.ts`
2. Use Zod schemas for input validation and documentation
3. Run `npm run build` to compile
4. Run `npm start` to test changes
5. Use `npm run debug` for debugging with Node.js inspector

## Current Tools

- `hello` - Simple greeting tool with optional name parameter
- `test` - Test tool for server functionality validation

## Design Philosophy

Keep it simple - use the MCP SDK as intended without custom abstractions. Zod provides validation and self-documentation. TypeScript gives autocomplete and type safety.
